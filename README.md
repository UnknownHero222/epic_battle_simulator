## Описание 

**Total Battle Simulator** — это простой симулятор пошаговых сражений с поддержкой различных типов юнитов, действий и событий. 

## Основные возможности

- **Карта**: Двумерная сетка (W×H).
    
- **Юниты**: 
	- Мечники 
	- Охотники
	- Башня
	- Грифон
	- Хилер
    
- **Команды**:    
    - **CREATE_MAP** - Создание карты.
    - **SPAWN_UnitName** - Размещение юнитов.
	- **MARCH** - установка конечной цели на карте для юнита

- **События**: Логирование действий, таких как создание карты, спавн юнитов, атаки, передвижения и смерти.

## Описание работы симулятора
Юниты расставляются на карте с помощью команд, которые заблаговременно заданы в файле в формате txt (см. примеры ниже). После завершения работы с файлом команд, юниты по-очереди (в порядке добавления) начинают движение к своим конечным точкам. В каждый ход юнит может выполнить два действия: движение или атака. Атака имеет приоритет над продвижением, так что когда два юнита окажутся в зоне досягаемости для атаки - они начнут сражение. Во всяком случае, как минимум один из них точно.

Некоторые юниты не могут совершать движения, например Башни. Для таких юнитов их конечными точками являются координаты появления на карте изначально.

## Примеры использования

### Команды в симуляции:

**Пример файла с командами:**

```
CREATE_MAP 10 10
SPAWN_SWORDSMAN 1 0 0 5 2
SPAWN_HUNTER 2 9 0 10 5 1 4
MARCH 1 9 0
MARCH 2 0 0
SPAWN_SWORDSMAN 3 0 9 10 2
MARCH 3 0 0
```

Запуск симуляции с файлом команд:

```
./TotalBattleSimulator commands.txt
```

Так же в папке files лежит скрипт launch.sh, который немного облегчает запуск различных сценариев (files/commands). Скрипт на баше и довольно-таки топорный, но позволяет быстро прогнать некоторые сценарии с различными комбинациями юнитов. 

```
./launch.sh 1 - сценарий сражения 2 мечников
./launch.sh 2 - сценарий сражения мечника и охотника
./launch.sh 3 - сценарий сражения мечника, охотник и башни
./launch.sh 4 - сценарий сражения башни и грифона
./launch.sh 5 - сценарий без сражений, все юниты просто доходят до своих целей
./launch.sh 6 - сценарий сражения всех юнитов (мечник,охотник,гриффон,башня,целитель)
```
## Разработка и тестирование

- Тестами покрыл некоторый функционал юнитов и критичные функции в карте. Основные выполняемые функции проходят через систему тестирования с помощью **Google Test**.    

## Сборка проекта
### Требования:
- **ОС Ubuntu**
- **CMake 3.20+**
-  **Сlang 15+**
- **Google Test** (автоматически загружается)

## TODO:

Возможные улучшения, которые можно реализовать

-  Добавление системы отрядов и командных боев
-  Улучшение системы выбора целей
- Увеличение количества тестов и возможных сценариев
- Более продуманная обработка исключений, пока просто прерывается программа при возникновении нештатной ситуации

